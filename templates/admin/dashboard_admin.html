<!-- templates/dashboard.html -->
{% extends 'components/base.html' %}

{% block content %}
    {% include 'components/header.html' %}
    
    <!-- Sección de estadísticas del dashboard -->
    <section class="dashboard-grid">
        {% set stats = [('Total de Usuarios', total_usuarios), ('Tutorias Este Mes', total_tutorias_mes)] %}
        {% for title, count in stats %}
            <div class="dashboard-card">
                <h3>{{ title }}</h3>
                <p class="number">{{ count }}</p>
            </div>
        {% endfor %}
    </section>

<!-- Tabla de todos los usuarios -->
<section class="table-container">
    <h3>Usuarios</h3>
    <table class="user-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Carrera</th>
                <th>Semestre</th>
            </tr>
        </thead>
        <tbody>
            {% for usuario in usuarios %}
                <tr>
                    <td>{{ usuario.id }}</td>
                    <td>{{ usuario.username }}</td>
                    <td>{{ usuario.email }}</td>
                    <td>{{ usuario.career }}</td>
                    <td>{{ usuario.semester }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="card-txt">No hay usuarios registrados.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<!-- Tabla de todas las tutorías -->
<section class="table-container">
    <h3>Tutorías</h3>
    <table class="tutorias-table">
        <thead>
            <tr>
                <th>ID Tutoría</th>
                <th>Nombre</th>
                <th>Horario</th>
                <th>Ubicacion</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for tutoria in tutorias %}
                <tr>
                    <td>{{ tutoria.id }}</td>
                    <td>{{ tutoria.nombre }}</td>
                    <td>{{ tutoria.horario }}</td>
                    <td>{{ tutoria.ubicacion }}</td>
                    <td>{% if tutoria.estado == true %}Activo{% else %}Finalizado{% endif %}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="card-txt">No hay tutorías registradas.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}
